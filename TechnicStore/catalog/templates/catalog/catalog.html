{% extends 'base.html' %}

{% load static %}

{% block title %} 
Catalog
{% endblock %}

{% block content %} 
<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    
    {% include "users_page/partials/error.html" %} 

    {% include "partials/topBar.html" %}

    {% include "users_page/partials/success.html" %}

    <div class="bin" id="bin">
        {%  include "users_page/partials/bin.html" %}
    </div>
    

    <section class="catalog__navigation">
        <div class="container">
            <ul class="navigation_links d-flex flex-row align-items-center">
                <li class="navigation__links_li list-unstyled d-flex flex-row align-items-center">
                    <a href="{% url 'home' %}" class="navigation_links_li_a">
                        <svg viewBox="0 0 24 24" fill="currentColor" class="breadcrumbsHomeIcon-0-2-99 pr icon-0-2-36">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M11.9125 2.375C12.3491 2.375 12.8136 2.5102 13.2 2.8L13.2341 2.82562L21.6408 10.3316C22.7542 11.2196 22.1437 13 20.7 13H20V19C20 19.5752 19.7224 20.0668 19.3946 20.3946C19.0667 20.7225 18.5752 21 18 21H15C13.7838 21 13 19.9862 13 19V15H11V19C11 19.9862 10.2161 21 8.99998 21H5.99998C4.78383 21 3.99997 19.9862 3.99997 19V13H3.29997C1.85752 13 1.24674 11.2226 2.35629 10.3339L10.6149 2.87122C10.9965 2.50354 11.4923 2.375 11.9125 2.375ZM11.9324 4.37633C11.9429 4.37767 11.9542 4.38006 11.9655 4.38367C11.973 4.38608 11.9794 4.38865 11.9845 4.39107L19.3865 11H18V18.9573C17.995 18.9643 17.9882 18.9726 17.9804 18.9804C17.9726 18.9882 17.9647 18.9947 17.9577 18.9997L15 19V13H8.99998V19H5.99998V11H4.60219L11.9324 4.37633Z">
                            </path>
                        </svg>
                    </a>
                    <svg viewBox="0 0 24 24" fill="currentColor" class="breadcrumbsItemIcon-0-2-100 icon-0-2-36">
                        <path
                            d="M9.79461 17.2946C9.40534 16.9053 9.405 16.2743 9.79384 15.8846L13.67 12L9.79384 8.11538C9.405 7.72569 9.40534 7.09466 9.79461 6.70538C10.1842 6.31581 10.8158 6.31581 11.2054 6.70538L16.5 12L11.2054 17.2946C10.8158 17.6842 10.1842 17.6842 9.79461 17.2946Z">
                        </path>
                    </svg>
                </li>
                <li class="navigation__links_li list-unstyled d-flex flex-row align-items-center">
                    <a href="" class="navigation_links_li_a">
                        {{type}}
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <section class="title__page">
        <div class="container">
            <h2>{{type}}</h2>
        </div>
    </section>

    <form hx-get="{% url 'filter_ajax' type %}" hx-target="#catalog__product" hx-swap="outerHTML" >
    <section class="sorting">
        <div class="container">
            <div class="catalog__palce">
                <svg viewBox="0 0 24 24" fill="#515151">
                    <path
                        d="M10 17C10 17.5523 10.4477 18 11 18H13C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16H11C10.4477 16 10 16.4477 10 17ZM4 6C3.44772 6 3 6.44772 3 7C3 7.55228 3.44772 8 4 8H20C20.5523 8 21 7.55228 21 7C21 6.44772 20.5523 6 20 6H4ZM6 12C6 12.5523 6.44772 13 7 13H17C17.5523 13 18 12.5523 18 12C18 11.4477 17.5523 11 17 11H7C6.44772 11 6 11.4477 6 12Z">
                    </path>
                </svg>
                <div>
                    <h4>Фільтр</h4>
                </div>
            </div>

            <div class="sorting__place">
                <div class="d-flex align-items-center">
                    <svg viewBox="0 0 24 24" fill="#515151">
                        <path
                            d="M15.9998 6.98997V16C15.9998 16.5523 16.4475 17 16.9998 17C17.5521 17 17.9998 16.5523 17.9998 16V6.98997L20.0324 6.98997C20.389 6.98997 20.5674 6.55862 20.3149 6.30677L17.706 3.70443C17.3157 3.31508 16.6839 3.31508 16.2936 3.70443L13.6847 6.30677C13.4322 6.55861 13.6106 6.98997 13.9672 6.98997H15.9998ZM10.3149 16.6932C10.5674 16.4413 10.389 16.01 10.0324 16.01H7.99981L7.99981 6.99997C7.99981 6.44769 7.5521 5.99997 6.99981 5.99997C6.44753 5.99997 5.99981 6.44769 5.99981 6.99997L5.99981 16.01H3.96721C3.6106 16.01 3.43225 16.4413 3.68472 16.6932L6.29359 19.2955C6.68391 19.6849 7.31571 19.6849 7.70603 19.2955L10.3149 16.6932Z">
                        </path>
                    </svg>
                    <h4>Сортування:</h4>
                </div>

                <div class="d-flex flex-row align-items-center">

                    <div class="d-flex flex-row align-items-center sorting__filter">
                        <p class="m-0" id="sort_by">{{sort}}</p>
                        <div class="sorting__menu">
                            <svg viewBox="0 0 24 24" fill="#3B6D9A" class="sorting__svg" id="sorting__svg">
                                <path
                                    d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                                </path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sorting__list" id="sorting__list">
                <ul>
                    <button class="button_checkbox_sort">
                        <input  type="checkbox" class="checkbox_sort" id="popular" name="popular" hidden>
                        <label type="submit" for="popular">за популярністю</label>
                    </button>
            
                    <button class="button_checkbox_sort">
                        <input  type="checkbox" class="checkbox_sort" id="price_up" name="price_up" hidden>
                        <label type="submit" for="price_up">за зростанням ціни</label>
                    </button>
            
                    <button class="button_checkbox_sort">
                        <input  type="checkbox" class="checkbox_sort" id="price_down" name="price_down" hidden>
                        <label type="submit" for="price_down">за зменшенням ціни</label>
                    </button>
                </ul>
            </div>

        </div>
    </section>

    <section class="catalog__page">
        <div class="container">
            <div id="catalog__page__catalog__page__background">
                <div class="catalog__filter" id="catalog__filter">
                    <div class="d-flex">
                        <svg viewBox="0 0 24 24" fill="#515151">
                            <path
                                d="M10 17C10 17.5523 10.4477 18 11 18H13C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16H11C10.4477 16 10 16.4477 10 17ZM4 6C3.44772 6 3 6.44772 3 7C3 7.55228 3.44772 8 4 8H20C20.5523 8 21 7.55228 21 7C21 6.44772 20.5523 6 20 6H4ZM6 12C6 12.5523 6.44772 13 7 13H17C17.5523 13 18 12.5523 18 12C18 11.4477 17.5523 11 17 11H7C6.44772 11 6 11.4477 6 12Z">
                            </path>
                        </svg>
                        <span class="catalog__filter__title">Фільтри</span>
                    </div>

                    <div class="filter__title d-flex justify-content-between align-items-center"
                        id="price__filter__title">
                        <span>Ціна</span>
                        <svg viewBox="0 0 24 24" fill="#515151" id="price__filter__svg">
                            <path
                                d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                            </path>
                        </svg>
                    </div>

                    
                    <div id="price__filter__content">
                        <div class="filter__price__choose">
                            
                            <div class="d-flex justify-content-between align-items-center form">
                                <div class="start__price">
                                    <input type="number" id="price__start" name="price_start">
                                </div>

                                <div>-</div>

                                <div class="end__price">
                                    <input type="number" id="price__end" name="price_end">
                                </div>

                                <button>ОК</button>
                            </div>
                            <div class="filter__price__slider" id="range__slider"></div>
                        </div>
                    </div>


                    <hr>

                    <div class="filter__title d-flex justify-content-between align-items-center"
                        id="brands__filter__title">
                        <span>Бренд</span>
                        <svg viewBox="0 0 24 24" fill="#515151" id="brands__filter__svg">
                            <path
                                d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                            </path>
                        </svg>
                    </div>

                    <div id="brands__filter__content">
                        
                        <div class="filter__content flex-column justify-content-center checkbox__brands">
                            {% for brand in brands %}
                            {% if forloop.counter <= 5%}
                            <div class="box-always">
                            {% else %}
                            <div class="hidden">
                                {% endif %}
                                <button class="on_checkbox-button">
                                    <input  type="checkbox" class="custom-checkbox" id="{{ brand }}-mobile" name="brand"
                                        value="{{ brand }}">
                                    <label type="submit" for="{{ brand }}-mobile">{{ brand }}</label>
                                </button>
                            </div>
                            {% endfor %}
                        </div>
                            
                        
                        <div class="more brands__mobile">
                            <button class="more__button">
                                <span class="show__more" id="show__more__mobile">Показати всі</span>
                                <span class="close" id="close__mobile">Згорнути</span>
                            </button>
                            <svg viewBox="0 0 24 24" fill="#515151" class="more__SVG" id="more__SVG__mobile">
                                <path
                                    d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                                </path>
                            </svg>
                        </div>
                    </div>
            
                    <hr>
                    

                    {% for filter in products.0.type.characteristic.all %}
                    
                        <div class="filter__title d-flex justify-content-between align-items-center"
                            id="brands__filter__title">
                            <span>{{filter.attribute}}</span>
                            <svg viewBox="0 0 24 24" fill="#515151" id="brands__filter__svg">
                                <path
                                    d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                                </path>
                            </svg>
                        </div>

                        <div id="brands__filter__content">

                            <div class="filter__content flex-column justify-content-center checkbox__brands">
                                {% for value in filter.value.all %}
                                {% if forloop.counter <= 5%}
                                <div class="box-always">
                                {% else %}
                                <div class="hidden">
                                    {% endif %}
                                    <button class="on_checkbox-button">
                                        <input  type="checkbox" class="custom-checkbox" id="{{ value.value }}-mobile" name="{{filter.attribute}}"
                                            value="{{ value.value }}">
                                        <label type="submit" for="{{ value.value }}-mobile">{{ value.value }}</label>
                                    </button>
                                </div>
                                {% endfor %}
                            </div>


                            <div class="more brands__mobile">
                                <button class="more__button">
                                    <span class="show__more" id="show__more__mobile">Показати всі</span>
                                    <span class="close" id="close__mobile">Згорнути</span>
                                </button>
                                <svg viewBox="0 0 24 24" fill="#515151" class="more__SVG" id="more__SVG__mobile">
                                    <path
                                        d="M17.2946 9.29462C16.9053 8.90534 16.2743 8.905 15.8846 9.29385L12 13.17L8.11538 9.29385C7.72569 8.905 7.09466 8.90534 6.70538 9.29462C6.31581 9.68419 6.31581 10.3158 6.70538 10.7054L12 16L17.2946 10.7054C17.6842 10.3158 17.6842 9.68419 17.2946 9.29462Z">
                                    </path>
                                </svg>
                            </div>
                        </div>


                        <hr>
                    {% endfor %}
                </div>
            </div> 
          
            {%  include "catalog/partials/catalog__product.html" %}
            
        </div>
    </section>
</form> 
</body>
{% endblock %}


{% block scripts %} 
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script type="module" src="{% static 'js/sortingListCatalog.js'%}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/price__space.js' %}"></script>
<script src="{% static 'js/nouislider.min.js'%}"></script>
<script src="{% static 'js/slider__catalog.js'%}"></script>
<script src="{% static 'js/showMore.js'%}"></script>
<script src="{% static 'js/hide.js'%}"></script>
<script src="{% static 'js/hide_bin.js'%}"></script>
<script src="{% static 'js/reload_with_htmx.js'%}"></script>
<script src="{% static 'js/main.js'%}"></script>
{% endblock %}